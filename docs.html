<h2 id="authorisation-api-by-token">Authorisation API by token</h2>
<p>The API provides stateless way to implement authorisation for RESTful APIs. A user of the API get a token once and can query other methods of server only providing the token until it expires.</p>
<p>Also the API provides a way to pack users in hierarchy of groups with attached permissions.</p>
<h2 id="get-authcodesuser-id">GET /auth/codes/:user-id</h2>
<h4 id="description">Description</h4>
<pre><code>Generate single usage codes that user can write down and use later for emergency 
authorisation.

&#39;Nothing&#39; for &quot;codes-count&quot; parameter means some default value defined by server. Server
can restrict maximum count of such codes.

Server should invalidate previous codes on subsequent calls of the endpoint.

Special authorisation tag can be used to disable the feature, merely don&#39;t give
the tag to users and they won&#39;t be able to generate codes.

See also: &#39;AuthSigninPostCodeMethod&#39; for utilisation of the codes.</code></pre>
<h4 id="authentication">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures">Captures:</h4>
<ul>
<li><p><em>user-id</em>: unique identifier</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="get-parameters">GET Parameters:</h4>
<ul>
<li>codes-count
<ul>
<li><strong>Values</strong>: <em>1, 42</em></li>
<li><strong>Description</strong>: Count of single use codes to be generated by the server. Can be restricted with upper bound. If the parameter is missing, the server chooses a default value.</li>
</ul></li>
</ul>
<h4 id="response">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;codes&quot;</span><span class="op">:</span>[]<span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;codes&quot;</span><span class="op">:</span>[<span class="st">&quot;&quot;</span>]<span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;codes&quot;</span><span class="op">:</span>[<span class="st">&quot;&quot;</span><span class="op">,</span><span class="st">&quot;&quot;</span>]<span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;codes&quot;</span><span class="op">:</span>[<span class="st">&quot;some text&quot;</span>]<span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;codes&quot;</span><span class="op">:</span>[<span class="st">&quot;&quot;</span><span class="op">,</span><span class="st">&quot;&quot;</span><span class="op">,</span><span class="st">&quot;&quot;</span>]<span class="op">}</span></code></pre></div>
<h2 id="get-authgroup">GET /auth/group</h2>
<h4 id="description-1">Description</h4>
<p>Get list of user groups, requires 'authInfoPerm' for token</p>
<h4 id="authentication-1">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="get-parameters-1">GET Parameters:</h4>
<ul>
<li>page
<ul>
<li><strong>Values</strong>: <em>0, 42</em></li>
<li><strong>Description</strong>: Index of page</li>
</ul></li>
<li>size
<ul>
<li><strong>Values</strong>: <em>42, 10</em></li>
<li><strong>Description</strong>: Number of elements on page</li>
</ul></li>
</ul>
<h4 id="response-1">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;items&quot;</span><span class="op">:</span>[<span class="op">{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">0</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">4</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">8</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">15</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">16</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">23</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">},{</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">42</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">}</span>]<span class="op">,</span><span class="st">&quot;pages&quot;</span><span class="op">:</span><span class="dv">1</span><span class="op">}</span></code></pre></div>
<h2 id="post-authgroup">POST /auth/group</h2>
<h4 id="description-2">Description</h4>
<p>Inserting new user group, requires 'authUpdatePerm' for token</p>
<h4 id="authentication-2">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="request">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">,</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-2">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">0</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">4</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">8</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">15</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">16</span><span class="op">}</span></code></pre></div>
<h2 id="delete-authgroupgroup-id">DELETE /auth/group/:group-id</h2>
<h4 id="description-3">Description</h4>
<p>Delete all info about given user group, requires 'authDeletePerm' for token</p>
<h4 id="authentication-3">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-1">Captures:</h4>
<ul>
<li><p><em>group-id</em>: identifier of a user group</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="response-3">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="get-authgroupgroup-id">GET /auth/group/:group-id</h2>
<h4 id="description-4">Description</h4>
<p>Getting info about user group, requires 'authInfoPerm' for token</p>
<h4 id="authentication-4">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-2">Captures:</h4>
<ul>
<li><p><em>group-id</em>: identifier of a user group</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="response-4">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">,</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h2 id="patch-authgroupgroup-id">PATCH /auth/group/:group-id</h2>
<h4 id="description-5">Description</h4>
<p>Patch info about given user group, requires 'authUpdatePerm' for token</p>
<h4 id="authentication-5">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-3">Captures:</h4>
<ul>
<li><p><em>group-id</em>: identifier of a user group</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="request-1">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;developers&quot;</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;program&quot;</span><span class="op">,</span><span class="st">&quot;eat&quot;</span><span class="op">,</span><span class="st">&quot;sleep&quot;</span>]<span class="op">,</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="dv">2</span><span class="op">,</span><span class="st">&quot;noParent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-5">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="put-authgroupgroup-id">PUT /auth/group/:group-id</h2>
<h4 id="description-6">Description</h4>
<p>Replace info about given user group, requires 'authUpdatePerm' for token</p>
<h4 id="authentication-6">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-4">Captures:</h4>
<ul>
<li><p><em>group-id</em>: identifier of a user group</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="request-2">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;name&quot;</span><span class="op">:</span><span class="st">&quot;moderators&quot;</span><span class="op">,</span><span class="st">&quot;users&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">42</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-register&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span><span class="op">,</span><span class="st">&quot;auth-delete&quot;</span>]<span class="op">,</span><span class="st">&quot;parent&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-6">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="post-authrestoreuser-id">POST /auth/restore/:user-id</h2>
<h4 id="description-7">Description</h4>
<p>Generate new password for user. There is two phases, first, the method is called without 'code' parameter. The system sends email with a restore code to user email or sms (its depends on server). After that a call of the method with the code is needed to change password.</p>
<h4 id="authentication-7">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-5">Captures:</h4>
<ul>
<li><em>user-id</em>: unique identifier</li>
</ul>
<h4 id="get-parameters-2">GET Parameters:</h4>
<ul>
<li>code
<ul>
<li><strong>Values</strong>: <em>fdfygie, sdf7230</em></li>
<li><strong>Description</strong>: Code that was sended to the user by some secure way</li>
</ul></li>
<li>password
<ul>
<li><strong>Values</strong>: <em>123, qwerty</em></li>
<li><strong>Description</strong>: Any valid password for user</li>
</ul></li>
</ul>
<h4 id="response-7">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="get-authsignin">GET /auth/signin</h2>
<h4 id="description-8">Description</h4>
<p>How to get a token, missing expire means some default value (server config).</p>
<pre><code>Logic of authorisation via login and password method is:

* Client sends GET request to the endpoint with
user specified login and password and optional expire

* Server responds with token or error

* Client uses the token with other requests as authorisation
header

* Client can extend lifetime of token by periodically pinging
of &#39;AuthTouchMethod&#39; endpoint

* Client can invalidate token instantly by &#39;AuthSignoutMethod&#39;

* Client can get info about user with &#39;AuthTokenInfoMethod&#39; endpoint.</code></pre>
<h4 id="description-9">Description</h4>
<p>Authorisation via codes of single usage, that are sended to user via different channel of communication.</p>
<pre><code>Logic of authorisation via single use code method is:

* Client sends GET request to &#39;AuthSigninGetCodeMethod&#39; endpoint

* Server generates single use token and sends it via
  SMS or email (server specific implementation)

* Client sends POST request to &#39;AuthSigninPostCodeMethod&#39; endpoint

* Server responds with auth token.

* Client uses the token with other requests as authorisation
header

* Client can extend lifetime of token by periodically pinging
of &#39;AuthTouchMethod&#39; endpoint

* Client can invalidate token instantly by &#39;AuthSignoutMethod&#39;

* Client can get info about user with &#39;AuthTokenInfoMethod&#39; endpoint.</code></pre>
<h4 id="authentication-8">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="get-parameters-3">GET Parameters:</h4>
<ul>
<li>login
<ul>
<li><strong>Values</strong>: <em>ncrashed, buddy</em></li>
<li><strong>Description</strong>: Any valid login for user</li>
</ul></li>
<li>password
<ul>
<li><strong>Values</strong>: <em>123, qwerty</em></li>
<li><strong>Description</strong>: Any valid password for user</li>
</ul></li>
<li>expire
<ul>
<li><strong>Values</strong>: <em>600, 30</em></li>
<li><strong>Description</strong>: Amount of time in seconds the returned token should be valid for, server can restrain maximum token life</li>
</ul></li>
</ul>
<h4 id="response-8">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;&quot;</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;some text&quot;</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;magic&quot;</span><span class="op">}</span></code></pre></div>
<h2 id="post-authsignin">POST /auth/signin</h2>
<h4 id="description-10">Description</h4>
<p>Authorisation via codes of single usage, that are sended to user via different channel of communication.</p>
<pre><code>Logic of authorisation via single use code method is:

* Client sends GET request to &#39;AuthSigninGetCodeMethod&#39; endpoint

* Server generates single use token and sends it via
  SMS or email (server specific implementation)

* Client sends POST request to &#39;AuthSigninPostCodeMethod&#39; endpoint

* Server responds with auth token.

* Client uses the token with other requests as authorisation
header

* Client can extend lifetime of token by periodically pinging
of &#39;AuthTouchMethod&#39; endpoint

* Client can invalidate token instantly by &#39;AuthSignoutMethod&#39;

* Client can get info about user with &#39;AuthTokenInfoMethod&#39; endpoint.</code></pre>
<h4 id="authentication-9">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="get-parameters-4">GET Parameters:</h4>
<ul>
<li>login
<ul>
<li><strong>Values</strong>: <em>ncrashed, buddy</em></li>
<li><strong>Description</strong>: Any valid login for user</li>
</ul></li>
<li>code
<ul>
<li><strong>Values</strong>: <em>fdfygie, sdf7230</em></li>
<li><strong>Description</strong>: Code that was sended to the user by some secure way</li>
</ul></li>
<li>expire
<ul>
<li><strong>Values</strong>: <em>600, 30</em></li>
<li><strong>Description</strong>: Amount of time in seconds the returned token should be valid for, server can restrain maximum token life</li>
</ul></li>
</ul>
<h4 id="response-9">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;&quot;</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;some text&quot;</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;token&quot;</span><span class="op">:</span><span class="st">&quot;magic&quot;</span><span class="op">}</span></code></pre></div>
<h2 id="post-authsignout">POST /auth/signout</h2>
<h4 id="description-11">Description</h4>
<p>Close session, after call of the method the token in header is not valid.</p>
<h4 id="authentication-10">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="response-10">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="post-authsignup">POST /auth/signup</h2>
<h4 id="description-12">Description</h4>
<p>Creation of new user, requires 'registerPerm' for token</p>
<h4 id="authentication-11">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="request-3">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed&quot;</span><span class="op">,</span><span class="st">&quot;password&quot;</span><span class="op">:</span><span class="st">&quot;mydogishappy&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@gmail.com&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-info&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span>]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-11">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;user&quot;</span><span class="op">:</span><span class="dv">0</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;user&quot;</span><span class="op">:</span><span class="dv">4</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;user&quot;</span><span class="op">:</span><span class="dv">8</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;user&quot;</span><span class="op">:</span><span class="dv">15</span><span class="op">}</span></code></pre></div>
<ul>
<li></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;user&quot;</span><span class="op">:</span><span class="dv">16</span><span class="op">}</span></code></pre></div>
<h2 id="get-authtoken">GET /auth/token</h2>
<h4 id="description-13">Description</h4>
<p>Get client info that is binded to the token</p>
<h4 id="authentication-12">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="response-12">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">42</span><span class="op">,</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@gmail.com&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;admin&quot;</span>]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">}</span></code></pre></div>
<h2 id="post-authtouch">POST /auth/touch</h2>
<h4 id="description-14">Description</h4>
<p>Client cat expand the token lifetime, no permissions are required</p>
<h4 id="authentication-13">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="get-parameters-5">GET Parameters:</h4>
<ul>
<li>expire
<ul>
<li><strong>Values</strong>: <em>600, 30</em></li>
<li><strong>Description</strong>: Amount of time in seconds the returned token should be valid for, server can restrain maximum token life</li>
</ul></li>
</ul>
<h4 id="response-13">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="delete-authuseruser-id">DELETE /auth/user/:user-id</h2>
<h4 id="description-15">Description</h4>
<p>Delete user from DB, requires 'authDeletePerm' and will cause cascade deletion, that is your usually want</p>
<h4 id="authentication-14">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-6">Captures:</h4>
<ul>
<li><p><em>user-id</em>: unique identifier</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="response-14">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="get-authuseruser-id">GET /auth/user/:user-id</h2>
<h4 id="description-16">Description</h4>
<p>Getting info about user, requires 'authInfoPerm' for token</p>
<h4 id="authentication-15">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-7">Captures:</h4>
<ul>
<li><p><em>user-id</em>: unique identifier</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="response-15">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">42</span><span class="op">,</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@gmail.com&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;admin&quot;</span>]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">}</span></code></pre></div>
<h2 id="patch-authuseruser-id">PATCH /auth/user/:user-id</h2>
<h4 id="description-17">Description</h4>
<p>Updating login/email/password, requires 'authUpdatePerm' for token</p>
<h4 id="authentication-16">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-8">Captures:</h4>
<ul>
<li><p><em>user-id</em>: unique identifier</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="request-4">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;nusicrashed&quot;</span><span class="op">,</span><span class="st">&quot;password&quot;</span><span class="op">:</span><span class="st">&quot;mycatishappy&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@mail.ru&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-16">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="put-authuseruser-id">PUT /auth/user/:user-id</h2>
<h4 id="description-18">Description</h4>
<p>Replace user with the user in the body, requires 'authUpdatePerm' for token</p>
<h4 id="authentication-17">Authentication</h4>
<p>Clients must supply the following data</p>
<h4 id="captures-9">Captures:</h4>
<ul>
<li><p><em>user-id</em>: unique identifier</p></li>
<li><p>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</p></li>
</ul>
<h4 id="request-5">Request:</h4>
<ul>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Example: <code>application/json</code></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed&quot;</span><span class="op">,</span><span class="st">&quot;password&quot;</span><span class="op">:</span><span class="st">&quot;mydogishappy&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@gmail.com&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;auth-info&quot;</span><span class="op">,</span><span class="st">&quot;auth-update&quot;</span>]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span><span class="kw">null</span><span class="op">}</span></code></pre></div>
<h4 id="response-17">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{}</span></code></pre></div>
<h2 id="get-authusers">GET /auth/users</h2>
<h4 id="description-19">Description</h4>
<p>Getting list of all users, requires 'authInfoPerm' for token</p>
<h4 id="authentication-18">Authentication</h4>
<p>Clients must supply the following data</p>
<ul>
<li>This endpoint is sensitive to the value of the <strong>Authorization</strong> HTTP header.</li>
</ul>
<h4 id="get-parameters-6">GET Parameters:</h4>
<ul>
<li>page
<ul>
<li><strong>Values</strong>: <em>0, 42</em></li>
<li><strong>Description</strong>: Index of page</li>
</ul></li>
<li>size
<ul>
<li><strong>Values</strong>: <em>42, 10</em></li>
<li><strong>Description</strong>: Number of elements on page</li>
</ul></li>
</ul>
<h4 id="response-18">Response:</h4>
<ul>
<li>Status code 200</li>
<li><p>Headers: []</p></li>
<li><p>Supported content types are:</p>
<ul>
<li><code>application/json</code></li>
</ul></li>
<li><p>Response body as below.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">{</span><span class="st">&quot;items&quot;</span><span class="op">:</span>[<span class="op">{</span><span class="st">&quot;id&quot;</span><span class="op">:</span><span class="dv">42</span><span class="op">,</span><span class="st">&quot;login&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed&quot;</span><span class="op">,</span><span class="st">&quot;email&quot;</span><span class="op">:</span><span class="st">&quot;ncrashed@gmail.com&quot;</span><span class="op">,</span><span class="st">&quot;permissions&quot;</span><span class="op">:</span>[<span class="st">&quot;admin&quot;</span>]<span class="op">,</span><span class="st">&quot;groups&quot;</span><span class="op">:</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">}</span>]<span class="op">,</span><span class="st">&quot;pages&quot;</span><span class="op">:</span><span class="dv">1</span><span class="op">}</span></code></pre></div>
